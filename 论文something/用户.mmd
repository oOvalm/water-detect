flowchart TD
    subgraph 推流密钥管理
        K["串流管理页面"] --> K1["创建/编辑推流key"]
        K1 --> K2{"设置授权范围"}
        K2 -- 指定范围可见 --> K3["配置指定用户列表"]
        K2 -- 所有人/仅自己可见 --> K5
        K3 --> K5["生成随机推流key"]
        K5 --> K6["存储key信息到数据库"]
        K --> K7["删除推流key"]
        K7 --> K8["传入keyID<br>调用删除key接口"]
        K8 --> K9["从数据库中删除"]
    end

    subgraph 用户观看流程
        U["在线分析页面"] --> U1["输入串流ID"]
        U1 --> U4{"校验是否有用户<br>是否有观看权限"}
        U4 -- 是 --> U2["加载两个DPlayer<br>分别播放检测前后的直播流"]
        U4 -- 否 --> U5["提示无权限"]
        U2 --> U3["DPlayer实时播放"]
    end
